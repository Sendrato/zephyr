# Copyright 2024, Sendrato.com
# SPDX-License-Identifier: Apache-2.0

description: |
  K32 pinctrl node. This node defines pin configurations in pin groups, and has
  the 'pinctrl' node identifier in the SOC's devicetree. Each group within the
  pin configuration defines a peripheral's pin configuration. Each numbered
  subgroup represents pins with shared configuration for that peripheral. The
  'pinmux' property of each group selects the pins to be configured with these
  properties. For example, here is a configuration for FLEXCOMM0 pins:

  pinmux_flexcomm0_usart: pinmux_flexcomm0_usart {
    group0 {
      pinmux = <FC0_TXD_SCL_MISO_WS_PIO0_30>,
              <FC0_RXD_SDA_MOSI_DATA_PIO0_29>;
      slew-rate = "standard";
    };
  };

  Note the inherited pinctrl properties defined below have the following effects:
  bias-pull-up: IOCON_MODE=0
  drive-push-pull: IOCON_MODE=1
  pin-plain-mode: IOCON_MODE=2
  bias-pull-down: IOCON_MODE=3
  drive-open-drain: IOCON_OD=1


compatible: "nxp,k32-iocon-pinctrl"

include: base.yaml

child-binding:
  description: K32 IOCON pin controller pin group
  child-binding:
    description: |
      K32 IOCON pin controller pin configuration node

    include:
      - name: pincfg-node.yaml
        property-allowlist:
          - drive-open-drain
          - bias-pull-up
          - bias-pull-down

    properties:
      pinmux:
        required: true
        type: array
        description: |
          Pin mux selection for this group. See the SOC level pinctrl header
          file in NXP's HAL for a defined list of these options.
      slew-rate:
        default: "standard"
        type: string
        enum:
          - "standard"
          - "fast"
        description: |
          Pin output slew rate. Sets the SLEW field in the IOCON register.
          defaults to standard slew rate, due to this being the reset value of
          the field.
          0 SLEW_0- standard mode, output slew rate is slower
          1 SLEW_1- fast mode, output slew rate is faster
      nxp,invert:
        type: boolean
        description: |
          Invert the pin input logic level
      nxp,analog-mode:
        type: boolean
        description: |
          Set the pin to analog mode. Sets DIGIMODE=0. Only valid for
          analog type pins.
      nxp,plain-mode:
        type: boolean
        description: |
          No pull-up or pull-down enabled is referred to as plain mode.
      nxp,repeater-mode:
        type: boolean
        description: |
          Enables the pull-up resistor if the pin is high and enables the
          pull-down resistor if the pin is low (aka drive-push-pull).
      nxp,i2c-pin:
        type: boolean
        description: |
          Should be selected for pins 10 and 11 regardless if I2C mode
          is used or not. On QN9090 pin 10 and 11 the IOCON register
          has a different format compared to standard IO pins.
      nxp,i2c-filter:
        type: string
        enum:
          - "slow"
          - "fast"
        description: |
          I2C glitch filter speed. Only valid for I2C mode pins. Fast mode
          typically only required for High speed I2C.
      nxp,i2c-mode:
        type: boolean
        description: |
          Enable I2C mode for a pin. If not present, pin is in GPIO mode. Only
          valid for I2C mode pins
